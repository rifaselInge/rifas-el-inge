<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rifas el Inge</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
        }
        header {
            background-color: #6200ea;
            color: white;
            padding: 1rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        header img {
            width: 175px; /* Tamaño duplicado del logo */
            height: 175px; /* Tamaño duplicado del logo */
            margin-right: 1px;
        }
        nav {
            display: flex;
            justify-content: center;
            background-color: #3700b3;
            padding: 0.5rem;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin: 0 1rem;
            font-weight: bold;
            cursor: pointer;
        }
        nav a:hover {
            text-decoration: underline;
        }
        main {
            padding: 2rem;
            text-align: center;
        }
        section {
            margin-bottom: 2rem;
        }
        .hidden {
            display: none;
        }
        .active {
            display: block;
        }
        .rifas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        .rifa {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 1rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .rifa h3 {
            margin: 0 0 0.5rem;
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1rem;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
        .seleccion-boletos, .registro-datos, .metodos-pago, .verificador {
            display: none;
        }
        button {
            background-color: #6200ea;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            cursor: pointer;
            border-radius: 5px;
            margin: 1rem;
        }
        button:hover {
            background-color: #3700b3;
        }
    </style>
</head>
<body>
    <script type="module">
  // Importa las funciones que necesitas del SDK de Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-analytics.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";  // Importa Firestore

  // Tu configuración de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyAMnpWXv-MUj_aPGLHx1H6Lvw5WYinKhAw",
    authDomain: "rifas-el-inge.firebaseapp.com",
    databaseURL: "https://rifas-el-inge-default-rtdb.firebaseio.com",
    projectId: "rifas-el-inge",
    storageBucket: "rifas-el-inge.firebasestorage.app",
    messagingSenderId: "779515097846",
    appId: "1:779515097846:web:68a7e48a485b271dfdf2d7",
    measurementId: "G-P5HQYJ6P9M"
  };

  // Inicializa Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

  // Inicializa Firestore
  const db = getFirestore(app);  // Inicialización de Firestore

    <header>
        <img src="https://rifaselinge.github.io/rifas-el-inge/assets/logo.png" alt="Logo Rifas el Inge">
        <h1>Rifas el Inge</h1>
    </header>
    <nav>
        <a onclick="mostrarVentana('inicio')">Inicio</a>
        <a onclick="mostrarVentana('seleccion-boletos')">Selecciona tus boletos</a>
        <a onclick="mostrarVentana('registro-datos')">Registro de datos</a>
        <a onclick="mostrarVentana('verificador')">Verificador de boletos</a>
        <a onclick="mostrarVentana('metodos-pago')">Métodos de pago</a>
        <a onclick="mostrarVentana('contacto')">Contacto</a>
    </nav>
    <main>
        <section id="inicio" class="active">
            <h2>Bienvenidos a Rifas el Inge</h2>
            <p>Participa en nuestras rifas y gana premios increíbles. ¡La suerte está de tu lado!</p>
            <section id="rifas">
                <h2>Rifas Activas</h2>
                <div class="rifas">
                    </div>
                    <div class="rifa">
                        <h3>Premio: Smartphone</h3>
                        <p>Boletos disponibles: 50/100</p>
                        <button onclick="irASeleccionBoletos('Smartphone')">Participar</button>
                    </div>
                    <div class="rifa">
                        <h3>Premio: Laptop</h3>
                        <p>Boletos disponibles: 10/50</p>
                        <button onclick="irASeleccionBoletos('Laptop')">Participar</button>
                    </div>
                </div>
            </section>
        </section>
        <section id="seleccion-boletos" class="hidden">
            <h2>Selecciona tus boletos</h2>
            <p>Premio seleccionado: <span id="premioSeleccionado"></span></p>
            <div>
                <label for="cantidadBoletos">Cantidad de boletos:</label>
                <input type="number" id="cantidadBoletos" min="1" max="100">
            </div>
            <button onclick="maquinaDeLaSuerte()">Usar Máquina de la Suerte</button>
            <div id="resultadoSuerte"></div>
            <div id="numerosDisponibles"></div>
        </section>
        <section id="registro-datos" class="hidden">
            <h2>Registra tus datos</h2>
            <p><strong>Boletos seleccionados:</strong> <span id="boletosSeleccionados"></span></p>
            <form>
                <label for="nombreCompleto">Nombre completo:</label>
                <input type="text" id="nombreCompleto" placeholder="Ingresa tu nombre completo" required>
                <label for="telefono">Número de teléfono:</label>
                <input type="tel" id="telefono" placeholder="Ingresa tu número de teléfono" required>
                <button type="submit" onclick="registrarDatos(event)">Registrar</button>
            </form>
        </section>
        <section id="verificador" class="hidden">
            <h2>Verificador de Boletos</h2>
            <input type="text" id="numeroBoleto" placeholder="Ingresa tu número de boleto, nombre o teléfono">
            <button onclick="verificarBoleto()">Verificar</button>
            <div id="resultado"></div>
        </section>
        <section id="metodos-pago" class="hidden">
            <h2>Métodos de Pago</h2>
            <p>Puedes realizar tu pago a través de los siguientes métodos:</p>
            <ul>
                <li>Transferencia bancaria: Santander</li>
                <li>Cuenta: 5579070129540202</li>
                <li>Nombre: Brayan Gerardo Aispuro</li>
            </ul>
        </section>
        <section id="contacto" class="hidden">
            <h2>Contacto</h2>
            <form>
                <label for="nombreContacto">Nombre completo:</label>
                <input type="text" id="nombreContacto" placeholder="Tu nombre completo" required>
                <label for="emailContacto">Correo electrónico:</label>
                <input type="email" id="emailContacto" placeholder="Tu correo electrónico" required>
                <textarea placeholder="Escribe tu mensaje" rows="5" required></textarea>
                <button type="submit">Enviar</button>
            </form>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Rifas el Inge. Todos los derechos reservados.</p>
    </footer>

    <script>
        const numerosDisponibles = Array.from({ length: 100 }, (_, i) => String(i + 1).padStart(3, "0"));
        let numerosSeleccionados = [];

        function mostrarVentana(id) {
            const secciones = document.querySelectorAll("main > section");
            secciones.forEach(seccion => {
                seccion.classList.add("hidden");
                seccion.classList.remove("active");
            });
            const activa = document.getElementById(id);
            activa.classList.add("active");
            activa.classList.remove("hidden");

            if (id === "registro-datos") {
                document.getElementById("boletosSeleccionados").textContent = numerosSeleccionados.join(", ");
            }
        }

        function irASeleccionBoletos(premio) {
            document.getElementById("premioSeleccionado").innerText = premio;
            mostrarVentana("seleccion-boletos");
            generarBotonesNumeros();
        }

        function generarBotonesNumeros() {
            const contenedor = document.getElementById("numerosDisponibles");
            contenedor.innerHTML = "";
            const fragmento = document.createDocumentFragment();
            numerosDisponibles.forEach((numero, index) => {
                const boton = document.createElement("button");
                boton.textContent = numero;
                boton.className = "boton-boleto";
                boton.onclick = () => seleccionarBoleto(numero, boton);
                fragmento.appendChild(boton);
                if ((index + 1) % 5 === 0) {
                    fragmento.appendChild(document.createElement("br"));
                }
            });
            contenedor.appendChild(fragmento);
        }

        function seleccionarBoleto(numero, boton) {
            if (!numerosSeleccionados.includes(numero)) {
                numerosSeleccionados.push(numero);
                boton.disabled = true;
                boton.style.backgroundColor = "#ccc";
                actualizarSeleccionados();
            }
        }

        function actualizarSeleccionados() {
            const seleccionadosDiv = document.getElementById("resultadoSuerte");
            seleccionadosDiv.innerHTML = `  
                <p><strong>Boletos seleccionados:</strong> ${numerosSeleccionados.join(", ")}</p>
                <button onclick="confirmarSeleccion()">Confirmar selección</button>
            `;
        }

        function maquinaDeLaSuerte() {
            const cantidad = parseInt(document.getElementById("cantidadBoletos").value);
            const resultadoSuerte = document.getElementById("resultadoSuerte");

            if (isNaN(cantidad) || cantidad < 1 || cantidad > 100) {
                resultadoSuerte.innerHTML = "<p>Por favor, ingresa una cantidad válida de boletos (1-100).</p>";
                return;
            }

            for (let i = 0; i < cantidad; i++) {
                const indiceAleatorio = Math.floor(Math.random() * numerosDisponibles.length);
                const seleccionado = numerosDisponibles[indiceAleatorio];
                numerosSeleccionados.push(seleccionado);
                numerosDisponibles.splice(indiceAleatorio, 1);
            }

            actualizarSeleccionados();
        }

        function confirmarSeleccion() {
            alert(`Boletos confirmados: ${numerosSeleccionados.join(", ")}`);
            mostrarVentana("registro-datos");
        }

     function registrarDatos(event) {
    event.preventDefault();
    const nombre = document.getElementById("nombreCompleto").value;
    const telefono = document.getElementById("telefono").value;

    if (nombre && telefono) {
        // Guardar los datos en Firebase Firestore
        addDoc(collection(db, "registros"), {
            nombre: nombre,
            telefono: telefono,
            boletos: numerosSeleccionados,
            fecha: new Date()
        })
        .then(() => {
            alert('Registro completado correctamente');
            numerosSeleccionados = [];  // Limpiar la lista de boletos seleccionados
            mostrarVentana("metodos-pago");
        })
        .catch((error) => {
            console.error("Error al registrar los datos: ", error);
            alert("Ocurrió un error al registrar los datos.");
        });
    } else {
        alert("Por favor, completa todos los campos.");
    }
}
        function verificarBoleto() {
            const entrada = document.getElementById("numeroBoleto").value.trim();
            const resultado = document.getElementById("resultado");

            if (numerosSeleccionados.includes(entrada)) {
                resultado.innerHTML = `<p>El boleto ${entrada} ha sido seleccionado.</p>`;
            } else if (numerosDisponibles.includes(entrada)) {
                resultado.innerHTML = `<p>El boleto ${entrada} está disponible.</p>`;
            } else {
                resultado.innerHTML = `<p>El boleto ${entrada} no está disponible o ya fue registrado.</p>`;
            }
        }
    </script>
</body>
</html>


